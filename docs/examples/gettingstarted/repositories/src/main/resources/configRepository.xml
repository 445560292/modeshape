<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  ~ JBoss DNA (http://www.jboss.org/dna)
  ~
  ~ See the COPYRIGHT.txt file distributed with this work for information
  ~ regarding copyright ownership.  Some portions may be licensed
  ~ to Red Hat, Inc. under one or more contributor license agreements.
  ~ See the AUTHORS.txt file in the distribution for a full listing of 
  ~ individual contributors.
  ~
  ~ JBoss DNA is free software. Unless otherwise indicated, all code in JBoss DNA
  ~ is licensed to you under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation; either version 2.1 of
  ~ the License, or (at your option) any later version.
  ~
  ~ JBoss DNA is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
  ~ or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License
  ~ for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this distribution; if not, write to:
  ~ Free Software Foundation, Inc.
  ~ 51 Franklin Street, Fifth Floor
  ~ Boston, MA  02110-1301  USA
  -->
<configuration xmlns="http://www.jboss.org/dna/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0">
    <!-- Define the sources from which content is made available -->
    <sources jcr:primaryType="nt:unstructured">
        <source jcr:name="Cars" classname="org.jboss.dna.graph.connector.inmemory.InMemoryRepositorySource" retryLimit="3" defaultWorkspaceName="default"/>
        <source jcr:name="Aircraft" classname="org.jboss.dna.graph.connector.inmemory.InMemoryRepositorySource">
            <defaultWorkspaceName>default</defaultWorkspaceName>
        </source>
        <source jcr:name="Vehicles">
            <classname>org.jboss.dna.graph.connector.federated.FederatedRepositorySource</classname>
            <workspaces>
                <workspace jcr:name="default">
                    <projections>
                        <projection jcr:name="Main projection" source="Cars" workspace="default">
                            <projectionRules>/Vehicles => /</projectionRules>
                        </projection>
                    </projections>
                </workspace>
            </workspaces>
        </source>
        <source jcr:name="Cache" classname="org.jboss.dna.graph.connector.inmemory.InMemoryRepositorySource">
            <defaultWorkspaceName>default</defaultWorkspaceName>
        </source>
    </sources>
    <!-- Define the JCR repositories -->
    <repositories>
        <repository jcr:name="cars">
            <!-- Specify the source that should be used for the repository -->
            <source>Cars</source>
            <!-- Define the options for the JCR repository, using camelcase version of JcrRepository.Option names -->
            <options jcr:primaryType="dna:options"/>
            <!-- Define any custom node types. Importing CND files via JcrConfiguration is equivalent to specifying here. -->
            <nodeTypes jcr:primaryType="dna:nodeTypes"/>
            <!-- Define any namespaces for this repository, other than those already defined by JCR or DNA -->
            <namespaces jcr:primaryType="dna:namespaces">
                <car jcr:primaryType="dna:namespace" dna:uri="http://jboss.org/dna/examples/cars/1.0"/>
            </namespaces>
        </repository>
        <repository jcr:name="vehicles">
            <!-- Specify the source that should be used for the repository -->
            <source>Vehicles</source>
            <!-- Define the options for the JCR repository, using camelcase version of JcrRepository.Option names -->
            <options jcr:primaryType="dna:options">
                <projectNodeTypes jcr:primaryType="dna:option" dna:value="false"/>
                <jaasLoginConfigName jcr:primaryType="dna:option" dna:value="dna-jcr"/>
            </options>
            <!-- Define any custom node types. Importing CND files via JcrConfiguration is equivalent to specifying here. -->
            <nodeTypes jcr:primaryType="dna:nodeTypes"/>
            <!-- Define any namespaces for this repository, other than those already defined by JCR, DNA or by imported content. -->
            <namespaces jcr:primaryType="dna:namespaces">
                <car jcr:primaryType="dna:namespace" dna:uri="http://jboss.org/dna/examples/cars/1.0"/>
                <air jcr:primaryType="dna:namespace" dna:uri="http://jboss.org/dna/examples/aircraft/1.0"/>
            </namespaces>
        </repository>
    </repositories>
</configuration>